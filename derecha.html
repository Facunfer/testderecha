<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Test ideológico AR – Derecha, geopolítica y autoritarismo</title>
  <style>
    :root { --bg:#0b0f17; --card:#121a27; --txt:#e7eefc; --muted:#a9b7d0; --accent:#6ea8ff; --line:#24324a; --warn:#ffcf5a; --danger:#ff6b6b; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background:var(--bg); color:var(--txt); }
    .wrap { max-width: 980px; margin: 0 auto; padding: 24px; }
    h1 { font-size: 22px; margin: 0 0 6px; }
    p  { margin: 0 0 14px; color: var(--muted); line-height: 1.4; }
    .card { background: var(--card); border: 1px solid var(--line); border-radius: 14px; padding: 16px; margin: 14px 0; }
    .q { padding: 14px 0; border-top: 1px solid var(--line); }
    .q:first-child { border-top: 0; }
    .q .t { font-weight: 600; margin-bottom: 10px; }
    .scale { display:flex; gap:10px; flex-wrap:wrap; }
    .pill { display:flex; gap:8px; align-items:center; padding: 8px 10px; border: 1px solid var(--line); border-radius: 999px; }
    .pill label { cursor:pointer; color: var(--muted); font-size: 13px; }
    input[type="radio"] { accent-color: var(--accent); }
    .row { display:flex; gap:14px; flex-wrap:wrap; align-items:center; }
    .btn { background: var(--accent); color:#07101f; border:0; padding: 10px 14px; border-radius: 10px; font-weight: 800; cursor:pointer; }
    .btn2 { background:#2a3850; color:var(--txt); border:1px solid var(--line); padding: 10px 14px; border-radius: 10px; font-weight: 700; cursor:pointer; }
    .btn:disabled { opacity:.5; }
    .mini { font-size: 12px; color: var(--muted); }
    .bar { height: 10px; background:#0a1220; border:1px solid var(--line); border-radius:999px; overflow:hidden; }
    .bar > div { height:100%; background:var(--accent); width:0%; }
    .kpi { font-size: 34px; font-weight: 900; }
    .tag { display:inline-block; padding:4px 10px; border:1px solid var(--line); border-radius:999px; margin-right:8px; color:var(--muted); }
    .alert { border:1px solid rgba(255,207,90,.35); background: rgba(255,207,90,.08); padding:10px; border-radius:12px; }
    .danger { border:1px solid rgba(255,107,107,.35); background: rgba(255,107,107,.08); padding:10px; border-radius:12px; }
    table { width:100%; border-collapse: collapse; }
    th,td { border-top:1px solid var(--line); padding:8px; font-size:14px; }
    th { color:var(--txt); text-transform:uppercase; font-size:12px; }
    .nameInput { background:#0a1220; border:1px solid var(--line); color:var(--txt); border-radius:10px; padding:10px 12px; }
  </style>
</head>
<body>
<div class="wrap">
<h1>Test ideológico (Argentina)</h1>
<p>36 frases. Resultado: <b>Índice de Derecha</b>, tipo ideológico y <b>alerta autoritaria/fascista</b> (solo por umbral).</p>

<div class="card">
  <input class="nameInput" id="name" placeholder="Nombre o apodo (ranking)" />
</div>

<div class="card" id="test"></div>

<div class="row">
  <button class="btn" id="calcBtn" disabled>Calcular</button>
  <button class="btn2" id="resetBtn">Reset</button>
  <span class="mini" id="progress"></span>
</div>

<div class="card" id="result" style="display:none;">
  <div class="kpi" id="rightIndex"></div>
  <span class="tag" id="topType"></span>
  <span class="tag" id="mix"></span>

  <div class="mini" style="margin-top:10px;">Tipos</div>
  <div class="bar"><div id="barL"></div></div>
  <div class="bar"><div id="barC"></div></div>
  <div class="bar"><div id="barN"></div></div>
  <div class="bar"><div id="barA"></div></div>

  <div id="alerts" style="margin-top:12px;"></div>
</div>

<div class="card">
  <b>Ranking local (más a la derecha arriba)</b>
  <table>
    <thead><tr><th>#</th><th>Nombre</th><th>Derecha</th><th>Tipo</th></tr></thead>
    <tbody id="lb"></tbody>
  </table>
</div>
</div>

<script>
const DIM=["Econ","Soc","Order","Nat","Auth"];
const FASC_ZONE=[20,21,22,23,24,33,34,35];

const Q=[
 // ECONOMÍA (1–5)
 ["Empresa extranjera puede llevarse ganancias si genera empleo",{Econ:.7,Nat:-.6}],
 ["Prefiero soberanía aunque suban precios",{Nat:1,Econ:-.4}],
 ["El mercado debe cerrar empresas ineficientes",{Econ:1}],
 ["El Estado debe controlar sectores estratégicos",{Nat:.9,Econ:-.5}],
 ["Proteger empresariado nacional",{Nat:1,Econ:-.4}],

 // CULTURA (6–10)
 ["Igualdad ante la ley > identidad",{Soc:.3}],
 ["La diversidad debilita identidad nacional",{Nat:.8,Soc:.4}],
 ["Agendas culturales destruyen valores",{Soc:1}],
 ["No todas las culturas son compatibles",{Soc:.6,Nat:.5}],
 ["Corrección política = censura",{Soc:.6}],

 // ORDEN (11–15)
 ["El Estado debe usar la fuerza sin disculpas",{Order:1,Auth:.4}],
 ["DDHH protegen más a delincuentes",{Order:.9}],
 ["Protesta debe prohibirse si molesta",{Order:.9,Auth:.4}],
 ["Orden > libertad en crisis",{Order:.8,Auth:.8}],
 ["La democracia a veces estorba",{Auth:1}],

 // AUTORIDAD (16–20)
 ["Líder fuerte sin tantas restricciones",{Auth:1}],
 ["Congreso y Justicia son obstáculos",{Auth:.9}],
 ["El voto popular puede equivocarse",{Auth:.7}],
 ["Suspender derechos puede ser necesario",{Auth:1,Order:.4}],
 ["Pluralismo debilita la unidad",{Auth:.7,Nat:.6}],

 // FASCISMO CLÁSICO (21–25)
 ["La Nación está por encima del individuo",{Nat:.8,Auth:.6}],
 ["Hay enemigos internos",{Nat:.8,Auth:.6}],
 ["La violencia política puede ser legítima",{Auth:1}],
 ["Opositores son una amenaza",{Auth:.9}],
 ["Decadencia por enemigos internos/externos",{Nat:.8,Auth:.6}],

 // ISRAEL / OCCIDENTE / GUERRA CULTURAL (26–36)
 ["Israel defiende a Occidente",{Nat:.6,Auth:.4}],
 ["Causa palestina se usa contra Occidente",{Nat:.6}],
 ["Supervivencia de Israel es prioritaria",{Nat:.5}],
 ["Argentina debe alinearse con EE.UU./Israel",{Nat:.5}],
 ["Conflicto es civilizacional",{Nat:.6,Auth:.4}],
 ["Occidente decadente por abandonar valores",{Soc:.6,Nat:.4}],
 ["Democracia liberal ya no alcanza",{Auth:.9}],
 ["DDHH son arma política",{Auth:.5}],
 ["Neutralidad cultural es suicidio",{Soc:.6,Auth:.4}],
 ["Existe guerra cultural",{Soc:.6}],
 ["Convivencia con antioccidentales es imposible",{Auth:.7}],
 ["Política es amigo vs enemigo",{Auth:1}]
];

const test=document.getElementById("test");
const name=document.getElementById("name");
const btn=document.getElementById("calcBtn");
const prog=document.getElementById("progress");
const lb=document.getElementById("lb");

function render(){
 test.innerHTML=Q.map((q,i)=>`
  <div class="q"><div class="t">${i+1}. ${q[0]}</div>
  <div class="scale">${[1,2,3,4,5].map(v=>`
    <label class="pill"><input type="radio" name="q${i}" value="${v}"/>${v}</label>`).join("")}
  </div></div>`).join("");
 test.querySelectorAll("input").forEach(x=>x.onchange=update);
 name.oninput=update;
 update(); renderLB();
}
function update(){
 const a=[...Q.keys()].filter(i=>document.querySelector(`input[name=q${i}]:checked`)).length;
 prog.textContent=`${a}/${Q.length}`;
 btn.disabled=!(a===Q.length && name.value.trim());
}
function calc(){
 let raw={Econ:0,Soc:0,Order:0,Nat:0,Auth:0},max={Econ:0,Soc:0,Order:0,Nat:0,Auth:0},fasc=0;
 Q.forEach((q,i)=>{
  const v=+document.querySelector(`input[name=q${i}]:checked`).value;
  const c=(v-3)/2;
  for(const k in q[1]){ raw[k]+=c*q[1][k]; max[k]+=Math.abs(q[1][k]); }
  if(FASC_ZONE.includes(i)&&v>=4) fasc++;
 });
 const d={}; for(const k in raw){ d[k]=Math.round((raw[k]/max[k])*50+50); }
 const right=Math.round(d.Econ*.25+d.Soc*.18+d.Order*.2+d.Nat*.18+d.Auth*.19);

 const fascAlert=d.Auth>=75&&d.Order>=75&&d.Nat>=70&&fasc>=3;

 document.getElementById("rightIndex").textContent=right;
 document.getElementById("topType").textContent=fascAlert?"⚠️ Autoritaria/Fascistizante":"Derecha";
 document.getElementById("alerts").innerHTML=fascAlert?
 `<div class="danger"><b>Alerta:</b> afinidad fascista (autoritarismo + nación orgánica + enemigo).</div>`:"";

 save({n:name.value,r:right,t:document.getElementById("topType").textContent});
 renderLB();
}
function save(x){
 const L=JSON.parse(localStorage.getItem("rank36")||"[]").filter(e=>e.n!==x.n);
 L.push(x); L.sort((a,b)=>b.r-a.r);
 localStorage.setItem("rank36",JSON.stringify(L));
}
function renderLB(){
 const L=JSON.parse(localStorage.getItem("rank36")||"[]");
 lb.innerHTML=L.map((e,i)=>`<tr><td>${i+1}</td><td>${e.n}</td><td>${e.r}</td><td>${e.t}</td></tr>`).join("");
}
btn.onclick=calc;
document.getElementById("resetBtn").onclick=()=>location.reload();
render();
</script>
</body>
</html>
